#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸª„ Running format before build..."
pnpm format

echo "ğŸ“¦ Running build before push..."

if pnpm build; then
  echo "âœ… Build succeeded on first try, pushing..."
  exit 0
else
  echo "âš ï¸ Build failed, retrying after format..."
  pnpm format
  
  if pnpm build; then
    echo "âœ… Build succeeded on second try, pushing..."
    exit 0
  else
    echo "âŒ Build failed twice, push aborted!"
    exit 1
  fi
fi
